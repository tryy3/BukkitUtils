<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>BukkitUtils by tryy3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">BukkitUtils</h1>
      <h2 class="project-tagline">Set of bukkit utilities</h2>
      <a href="https://github.com/tryy3/BukkitUtils" class="btn">View on GitHub</a>
      <a href="https://github.com/tryy3/BukkitUtils/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/tryy3/BukkitUtils/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h2>
<a id="download-" class="anchor" href="#download-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download: </h2>

<p>You can found the latest release <a href="http://maven.aumgn.fr/fr/aumgn/bukkitutils/1.0.0-RC3/bukkitutils-1.0.0-RC3.jar">here</a>.</p>

<p>For older et development versions, see <a href="http://maven.aumgn.fr/fr/aumgn/bukkitutils">my maven repository</a>.</p>

<h2>
<a id="developers-" class="anchor" href="#developers-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developers :</h2>

<h3>
<a id="installation-" class="anchor" href="#installation-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation :</h3>

<p>BukkitUtils is an external library that must be provided at runtime.
The easiest way to do that is to add a class path entry to your plugin's MANIFEST.
With Maven you just have to configure the the maven jar plugin as follows: </p>

<div class="highlight highlight-xml"><pre>    &lt;<span class="pl-ent">plugin</span>&gt;
        &lt;<span class="pl-ent">groupId</span>&gt;org.apache.maven.plugins&lt;/<span class="pl-ent">groupId</span>&gt;
      &lt;<span class="pl-ent">artifactId</span>&gt;maven-jar-plugin&lt;/<span class="pl-ent">artifactId</span>&gt;
        &lt;<span class="pl-ent">version</span>&gt;2.3.2&lt;/<span class="pl-ent">version</span>&gt;
        &lt;<span class="pl-ent">configuration</span>&gt;
            &lt;<span class="pl-ent">archive</span>&gt;
                &lt;<span class="pl-ent">manifestEntries</span>&gt;
                    &lt;<span class="pl-ent">Class-Path</span>&gt;../lib/BukkitUtils.jar&lt;/<span class="pl-ent">Class-Path</span>&gt;
                &lt;/<span class="pl-ent">manifestEntries</span>&gt;
            &lt;/<span class="pl-ent">archive</span>&gt;
        &lt;/<span class="pl-ent">configuration</span>&gt;
    &lt;/<span class="pl-ent">plugin</span>&gt;</pre></div>

<p>Which means the user will have to provide the library at the corresponding path. You should prefer this path is this is the one which is used by other plugins.</p>

<h3>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h3>

<p>The javadoc is available <a href="http://bukkitutils.aumgn.fr/apidocs/">here</a>.</p>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>BukkitUtils include different utilities :</p>

<ul>
<li>localization : Localization utilities</li>
<li>commands : A set of classes and annotations to write commands more easily (heavily inspired from WorldEdit commands system).</li>
<li>gconf: A tiny gson wrapper with convenient type adaptaters.</li>
<li>playerId : A class (PlayerId) and its associated collections to manage players based on their names.</li>
<li>and a lot of others utilities class and interface like immutable vectors, directions, timer class, etc ...</li>
</ul>

<h4>
<a id="commands" class="anchor" href="#commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Commands</h4>

<p>Here are some examples of how you would write commands with BukkitUtils : </p>

<div class="highlight highlight-java"><pre>    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyCommands</span> <span class="pl-k">extends</span> <span class="pl-e">Commands</span> {

        <span class="pl-c">// ** Simplest command</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>)
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">test</span>(<span class="pl-smi">CommandSender</span> <span class="pl-v">sender</span>) {
            sender<span class="pl-k">.</span>sendMessage(<span class="pl-s"><span class="pl-pds">"</span>Foo !<span class="pl-pds">"</span></span>);
        }

        <span class="pl-c">// ** Player only command</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test2<span class="pl-pds">"</span></span>)
        pubic <span class="pl-k">void</span> <span class="pl-en">test2</span>(<span class="pl-smi">Player</span> <span class="pl-v">sender</span>) {
            sender<span class="pl-k">.</span>sendMessage(<span class="pl-s"><span class="pl-pds">"</span>Position: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-k">new</span> <span class="pl-smi">Vector</span>(sender));
        }

        <span class="pl-c">// ** Command with two arguments</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test3<span class="pl-pds">"</span></span>, <span class="pl-c1">min</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>, <span class="pl-c1">max</span> <span class="pl-k">=</span> <span class="pl-c1">2</span>)
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">test3</span>(<span class="pl-smi">CommandSender</span> <span class="pl-v">sender</span>, <span class="pl-smi">CommandArg</span> <span class="pl-v">args</span>) {
            sender<span class="pl-k">.</span>sendMessage(<span class="pl-s"><span class="pl-pds">"</span>Arguments: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> args<span class="pl-k">.</span>get(<span class="pl-c1">0</span>) <span class="pl-s"><span class="pl-pds">"</span> - <span class="pl-pds">"</span></span> <span class="pl-k">+</span> args<span class="pl-k">.</span>get(<span class="pl-c1">1</span>));
        }

        <span class="pl-c">// ** Commands with complex arguments</span>
        <span class="pl-c">// Try to parse the first argument as a partial player name.</span>
        <span class="pl-c">// This will send a message and abort the command if no player </span>
        <span class="pl-c">// or if more than one player is/are found.</span>
        <span class="pl-c">// If no argument is given (which is accepted since </span>
        <span class="pl-c">// min is set to 0), the library will return back the</span>
        <span class="pl-c">// sender if it's a player or throw an exception</span>
        <span class="pl-c">// (which will send a nice error message to the user)</span>
        <span class="pl-c">// if it's not.</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test4<span class="pl-pds">"</span></span>, <span class="pl-c1">min</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">max</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>)
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">test4</span>(<span class="pl-smi">CommandSender</span> <span class="pl-v">sender</span>, <span class="pl-smi">CommandArgs</span> <span class="pl-v">args</span>) {
            <span class="pl-smi">Player</span> player <span class="pl-k">=</span> args<span class="pl-k">.</span>getPlayer(<span class="pl-c1">0</span>)<span class="pl-k">.</span>value(sender);
            <span class="pl-c">// Note that you can also use match() instead of value()</span>
            <span class="pl-c">// which would returns a list of all matching players.</span>
            sender<span class="pl-k">.</span>sendMessage(<span class="pl-s"><span class="pl-pds">"</span>Utilisation de la commande sur :<span class="pl-pds">"</span></span>
                <span class="pl-k">+</span> player<span class="pl-k">.</span>getDisplayName());
        }

        <span class="pl-c">// ** List arguments</span>
        <span class="pl-c">// Using getPlayers instead of getPlayer will returns a list.</span>
        <span class="pl-c">// For example : "au,notch" will returns a list of </span>
        <span class="pl-c">// all players whose name matches au or notch</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test5<span class="pl-pds">"</span></span>, <span class="pl-c1">min</span> <span class="pl-k">=</span> <span class="pl-c1">0</span>, <span class="pl-c1">max</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>)
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">test5</span>(<span class="pl-smi">CommandSender</span> <span class="pl-v">sender</span>, <span class="pl-smi">CommandArgs</span> <span class="pl-v">args</span>) {
            <span class="pl-k">List&lt;<span class="pl-smi">Player</span>&gt;</span> players <span class="pl-k">=</span> args<span class="pl-k">.</span>getPlayers(<span class="pl-c1">0</span>)<span class="pl-k">.</span>match(sender);
            sender<span class="pl-k">.</span>sendMessage(<span class="pl-s"><span class="pl-pds">"</span>Utilisation de la commande sur :<span class="pl-pds">"</span></span>);
            <span class="pl-k">for</span> (<span class="pl-smi">Player</span> player <span class="pl-k">:</span> players) {
                sender<span class="pl-k">.</span>sendMessage(<span class="pl-s"><span class="pl-pds">"</span> - <span class="pl-pds">"</span></span> <span class="pl-k">+</span> player<span class="pl-k">.</span>getDisplayName());
            }
        }

        <span class="pl-c">// ** Commands with flags</span>
        <span class="pl-c">// Available flags must be declared in the annotation.</span>
        <span class="pl-c">// If an invalid flag is used the sender will be notified.</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test6<span class="pl-pds">"</span></span>, <span class="pl-c1">flags</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>at<span class="pl-pds">"</span></span>)
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">test6</span>(<span class="pl-smi">CommandSender</span> <span class="pl-v">sender</span>, <span class="pl-smi">CommandArgs</span> <span class="pl-v">args</span>) {
            <span class="pl-k">if</span> (args<span class="pl-k">.</span>hasFlag(<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>)) {
                <span class="pl-c">// Do something</span>
            } <span class="pl-k">else</span> <span class="pl-k">if</span> (args<span class="pl-k">.</span>hasFlag(<span class="pl-s"><span class="pl-pds">'</span>t<span class="pl-pds">'</span></span>)) {
                <span class="pl-c">// Do something else</span>
            }
        }

        <span class="pl-c">// ** Commands with argument flags</span>
        <span class="pl-c">// The syntax is : "/test6 -p=au -w=world"</span>
        <span class="pl-k">@Command</span>(<span class="pl-c1">name</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>test6<span class="pl-pds">"</span></span>, <span class="pl-c1">argsFlags</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>pw<span class="pl-pds">"</span></span>)
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">test6</span>(<span class="pl-smi">CommandSender</span> <span class="pl-v">sender</span>, <span class="pl-smi">CommandArgs</span> <span class="pl-v">args</span>) {
            <span class="pl-k">if</span> (args<span class="pl-k">.</span>hasFlag(<span class="pl-s"><span class="pl-pds">'</span>p<span class="pl-pds">'</span></span>)) {
                <span class="pl-smi">Player</span> player <span class="pl-k">=</span> args<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">'</span>p<span class="pl-pds">'</span></span>, <span class="pl-smi">Player</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>value();
                <span class="pl-c">// Do something with player.</span>
            } <span class="pl-k">else</span> <span class="pl-k">if</span> (args<span class="pl-k">.</span>hasFlag(<span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>)) {
                <span class="pl-smi">World</span> world <span class="pl-k">=</span> args<span class="pl-k">.</span>get(<span class="pl-s"><span class="pl-pds">'</span>w<span class="pl-pds">'</span></span>, <span class="pl-smi">World</span><span class="pl-k">.</span>class)<span class="pl-k">.</span>value();
                <span class="pl-c">// Do something with world.</span>
            }
        }
    }</pre></div>

<p>In to order to register your commands you just have to use the class CommandsRegistration : </p>

<pre><code>CommandsRegistration registration = new CommandsRegistration(plugin, config.getLocale());
registration.register(new MyCommands());
</code></pre>

<p>This command system is quite powerful and extensible.
You can add your own arguments parsers using the classes CommandArg and CommandArgsFactory.
See example in the source code or in <a href="https://github.com/aumgn/">my other plugins</a>.</p>

<p>The main advantages of this system over others is that all commands (even nested commands) are first citizens Bukkit commands.
Which means they are declared in the plugin.yml with their own permission, that also means that users can declare their own aliases in the bukkit.yml file !</p>

<h4>
<a id="configuration-example" class="anchor" href="#configuration-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration Example</h4>

<p>Here's how you could write using the gson wrapper : </p>

<div class="highlight highlight-java"><pre>    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyConfig</span> {

        <span class="pl-k">private</span> <span class="pl-k">int</span> entry1 <span class="pl-k">=</span> <span class="pl-c1">1</span>;
        <span class="pl-k">private</span> <span class="pl-smi">String</span> entry2 <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>string<span class="pl-pds">"</span></span>;
        <span class="pl-k">private</span> <span class="pl-smi">String</span> entry3 <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>BLUE<span class="pl-pds">"</span></span>;

        <span class="pl-k">public</span> <span class="pl-k">int</span> <span class="pl-en">getEntry1</span>() {
            <span class="pl-k">return</span> entry1;
        }

        <span class="pl-k">public</span> <span class="pl-smi">String</span> <span class="pl-en">getEntry2</span>() {
            <span class="pl-k">return</span> entry2;
        }

        <span class="pl-k">public</span> <span class="pl-smi">ChatColor</span> <span class="pl-en">getEntry3</span>() {
            <span class="pl-k">try</span> {
                <span class="pl-k">return</span> <span class="pl-smi">ChatColor</span><span class="pl-k">.</span>valueOf(entry3);
            } <span class="pl-k">catch</span> (<span class="pl-smi">IllegalArgumentException</span> exc) {
                <span class="pl-smi">Logger</span><span class="pl-k">.</span>getLogger(<span class="pl-smi">MyPlugin</span><span class="pl-k">.</span>class<span class="pl-k">.</span>getName())<span class="pl-k">.</span>severe(<span class="pl-s"><span class="pl-pds">"</span>Invalid color for entry2.<span class="pl-pds">"</span></span>);
                <span class="pl-k">return</span> <span class="pl-smi">ChatColor</span><span class="pl-c1"><span class="pl-k">.</span>BLUE</span>;
            }
        }
    }

    <span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyPlugin</span> <span class="pl-k">extends</span> <span class="pl-e">JavaPlugin</span> {

        <span class="pl-k">private</span> <span class="pl-smi">MyConfig</span> config;

        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onEnable</span>() {
            <span class="pl-smi">Gson</span> gson <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">GsonBuilder</span>()
                .setPrettyPrinting()
                .create();
            <span class="pl-smi">GConfLoader</span> loader <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">GConfLoader</span>(gson, <span class="pl-v">this</span>);

            <span class="pl-k">try</span> {
                config <span class="pl-k">=</span> loader<span class="pl-k">.</span>load(<span class="pl-s"><span class="pl-pds">"</span>config.json<span class="pl-pds">"</span></span>, <span class="pl-smi">MyConfig</span><span class="pl-k">.</span>class);
            } <span class="pl-k">catch</span> (<span class="pl-smi">GConfLoadException</span> exc) {
                getLogger()<span class="pl-k">.</span>log(<span class="pl-smi">Level</span><span class="pl-c1"><span class="pl-k">.</span>SEVERE</span>, <span class="pl-s"><span class="pl-pds">"</span>Unable to load config.json<span class="pl-pds">"</span></span>, exc);
                config <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">MyConfig</span>();
            }
        }
    }</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/tryy3/BukkitUtils">BukkitUtils</a> is maintained by <a href="https://github.com/tryy3">tryy3</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

